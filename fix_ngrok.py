from pyngrok import ngrok, conf
import os
import time

#р╣Гр╕кр╣Ир╕гр╕лр╕▒р╕к Token р╣Гр╕лр╕бр╣Ир╕Вр╕нр╕Зр╕Др╕╕р╕Ур╕Хр╕гр╕Зр╕Щр╕╡р╣Й (р╕лр╣Йр╕▓р╕бр╕бр╕╡ < > р╕лр╕гр╕╖р╕нр╕Кр╣Ир╕нр╕Зр╕зр╣Ир╕▓р╕З)
NEW_TOKEN = "2ZmmehlSYsG8hl7MQlB4V5GvKCu_88XGBf5vKgN8umUUoFQaP"

print("ЁЯФД р╕Бр╕│р╕ер╕▒р╕Зр╕ер╣Йр╕▓р╕Зр╕Др╣Ир╕▓ Ngrok р╣Ар╕Бр╣Ир╕▓...")

#р╕кр╕▒р╣Ир╕Зр╕Ыр╕┤р╕Ф Ngrok р╕Чр╕╡р╣Ир╕Др╣Йр╕▓р╕Зр╕нр╕вр╕╣р╣Ир╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
ngrok.kill()
time.sleep(2) # р╕гр╕нр╣Гр╕лр╣Йр╕Ыр╕┤р╕Фр╕кр╕Щр╕┤р╕Ч

#р╕Ър╕▒р╕Зр╕Др╕▒р╕Ър╣Ар╕Вр╕╡р╕вр╕Щ Token р╣Гр╕лр╕бр╣Ир╕ер╕Зр╣Др╕Ыр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ
print(f"ЁЯФС р╕Бр╕│р╕ер╕▒р╕Зр╕нр╕▒р╕Ыр╣Ар╕Фр╕Х Token р╣Ар╕Ыр╣Зр╕Щ: {NEW_TOKEN[:5]}...{NEW_TOKEN[-5:]}")
ngrok.set_auth_token(NEW_TOKEN)

#р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕н
try:
    url = ngrok.connect(5000).public_url
    print(f"\nтЬЕ р╕кр╕│р╣Ар╕гр╣Зр╕И! Ngrok р╕нр╕нр╕Щр╣Др╕ер╕Щр╣Мр╣Бр╕ер╣Йр╕зр╕Чр╕╡р╣И: {url}")
    print("ЁЯСЙ р╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╕Др╕╕р╕Ур╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕гр╕▒р╕Щ python app.py р╣Др╕Фр╣Йр╣Ар╕ер╕вр╕Др╕гр╕▒р╕Ъ!")
    ngrok.kill() # р╕Ыр╕┤р╕Фр╕Хр╕▒р╕зр╣Ар╕Чр╕к
except Exception as e:
    print(f"\nтЭМ р╕вр╕▒р╕Зр╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓: {e}")
    print("р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Token р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕Зр╣Др╕лр╕б (р╕Хр╣Йр╕нр╕Зр╣Др╕бр╣Ир╕бр╕╡ < > р╣Бр╕ер╕░р╣Др╕бр╣Ир╣Ар╕зр╣Йр╕Щр╕зр╕гр╕гр╕Д)")